# base image: last debian release
FROM debian:wheezy
#FROM debian:jessie

# name of the maintainer of this image
MAINTAINER laetitia.guillot@univ-rennes1.fr
USER root
# install the latest upgrades
RUN apt-get update && apt-get -y dist-upgrade

# install dos2unix
RUN apt-get -y install dos2unix
#RUN apt-get -y install subversion
RUN apt-get -y install git git-core git-daemon-run
RUN apt-get -y install make
RUN apt-get -y install build-essential g++

# compiler pepnovo
#RUN svn co https://prabi1.inrialpes.fr/svn/HelixSofts/EctoLine/trunk EctoLine
RUN git clone https://github.com/laeticlo/Ectoline.git EctoLine
RUN dos2unix /EctoLine/thirdparty/pepnovo/pepnovo.3.1b/Models/*.*
RUN dos2unix /EctoLine/thirdparty/pepnovo/pepnovo.3.1b/Models/*/*.* 
RUN cd /EctoLine/thirdparty && \ 
make -f Makefile all

# ENV PATH /EctoLine/thirdparty/pepnovo/pepnovo.3.1b/src:$PATH

# compiler les autres tools
#RUN cd ../src
RUN cd /EctoLine/src && \
make -f Makefile all

ENV PATH /EctoLine/ports/i386-linux/bin:$PATH
ENV PATH /EctoLine/scripts:$PATH

#RUN make test
#ENV PATH /EctoLine/src/prog/PMClust:$PATH
#ENV PATH /EctoLine/src/prog/PMMatch:$PATH
#ENV PATH /EctoLine/src/prog/Taggor:$PATH
#ENV PATH /EctoLine/src/prog/PMTrans:$PATH

#test tout
#RUN /bin/Ectoline/tests
#RUN ./runTests


